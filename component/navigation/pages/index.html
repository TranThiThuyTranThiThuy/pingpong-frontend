<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TBall Shop üèì</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <img src="../../assets/imgs/logo.png" alt="Logo" style="height: 120px;">
        </div>
        <div class="search-bar">
            <input type="text" placeholder="T√¨m ki·∫øm...">
            <button>T√¨m üîé</button>
        </div>
        <div class="user-actions">
            <a href="../../login/login.html">ƒêƒÉng nh·∫≠p</a> | <a href="../../register/register.html">ƒêƒÉng k√Ω</a>
            <a href="#" class="cart">üõí Gi·ªè h√†ng</a>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="./index.html">Trang ch·ªß</a></li>
            <li><a href="./Blades.html">C·ªët v·ª£t</a></li>
            <li><a href="./Rubbers.html">M·∫∑t v·ª£t</a></li>
            <li><a href="./Accessories.html">Ph·ª• ki·ªán b√≥ng b√†n</a></li>
            <li><a href="#">Gi·ªõi thi·ªáu</a></li>
            <li><a href="#">Li√™n h·ªá</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <!-- Sidebar -->
        <aside>
            <h2>Danh m·ª•c s·∫£n ph·∫©m</h2>
            <ul>
                <li><a href="./Blades.html">üèì C·ªët v·ª£t</a></li>
                <li><a href="./Rubbers.html">üìö M·∫∑t v·ª£t</a></li>
                <li><a href="#">‚≠ê B·ªô v·ª£t b√°n ch·∫°y</a></li>
                <li><a href="./Accessories.html">üîß Ph·ª• ki·ªán b√≥ng b√†n</a></li>
                <li><a href="#">üìä  B√†n b√≥ng b√†n</a></li>
                <li><a href="#">üè¨ H√†ng n·ªôi ƒë·ªãa Nh·∫≠t</a></li>
                <li><a href="#">üöö ƒê·ªì th·ªÉ thao x√°ch tay Nh·∫≠t</a></li>
                <li><a href="#">üè∑Ô∏è Ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i</a></li>
            </ul>
        </aside>        
        
        <!-- Main Content -->
        <main>
            <div class="slider-container">
                <div class="slider">
                    <div class="slides">
                        <img src="../../../assets/imgs/sd1.png" alt="Qu·∫£ng c√°o 1">
                        <img src="../../../assets/imgs/slider2.png" alt="Qu·∫£ng c√°o 2">
                        <img src="../../../assets/imgs/slider3.png" alt="Qu·∫£ng c√°o 3">
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Danh m·ª•c s·∫£n ph·∫©m b√°n ch·∫°y -->
    <section class="featured-products">
        <h2>S·∫£n ph·∫©m b√°n ch·∫°y</h2>
        
        <div class="categories">
            <input type="radio" id="bo-vot" name="category" class="category-input" checked>
            <label for="bo-vot" class="category-btn">‚≠ê B·ªô v·ª£t b√°n ch·∫°y</label>
        
            <input type="radio" id="cot-vot" name="category" class="category-input">
            <label for="cot-vot" class="category-btn">üèì C·ªët v·ª£t b√°n ch·∫°y</label>
        
            <input type="radio" id="mat-vot" name="category" class="category-input">
            <label for="mat-vot" class="category-btn">üìö M·∫∑t v·ª£t b√°n ch·∫°y</label>
        </div>
        
        <div class="product-grid" id="product-list">
            <!-- D·ªØ li·ªáu s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
        </div>
    </section>
    
    <script>
        // Mapping danh m·ª•c t·ª´ t√™n sang ID
        const categoryMap = {
            "bo-vot": 1,
            "cot-vot": 2,
            "mat-vot": 3
        };
    
        // H√†m g·ªçi API l·∫•y s·∫£n ph·∫©m theo danh m·ª•c
        async function fetchProducts(categoryKey = "bo-vot") {
            try {
                const categoryId = categoryMap[categoryKey];
                if (!categoryId) throw new Error("Danh m·ª•c kh√¥ng h·ª£p l·ªá!");
    
                console.log(`üîÑ ƒêang t·∫£i s·∫£n ph·∫©m cho danh m·ª•c: ${categoryKey} (ID: ${categoryId})`);
    
                const response = await fetch(`http://localhost:3000/api/products?category=${categoryId}`);
                if (!response.ok) {
                    throw new Error(`L·ªói API: ${response.status} ${response.statusText}`);
                }
    
                const products = await response.json();
                console.log("üì¶ D·ªØ li·ªáu s·∫£n ph·∫©m nh·∫≠n ƒë∆∞·ª£c:", products);
    
                const productList = document.getElementById("product-list");
                productList.innerHTML = products.length === 0 
                    ? "<p>Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o.</p>" 
                    : products.map(product => `
                        <div class="product-box">
                            <img src="${product.image_url}" alt="${product.product_name}">
                            <div class="product-info">
                                <h3>${product.product_name}</h3>
                                <p class="price">${product.price.toLocaleString()}ƒë</p>
                                <button class="add-to-cart">Th√™m v√†o gi·ªè h√†ng</button>
                            </div>
                        </div>
                    `).join('');
            } catch (error) {
                console.error("‚ùå L·ªói khi l·∫•y s·∫£n ph·∫©m:", error);
                document.getElementById("product-list").innerHTML = `<p>${error.message}</p>`;
            }
        }
    
        // G√°n s·ª± ki·ªán change cho c√°c radio button
        document.querySelectorAll(".category-input").forEach(input => {
            input.addEventListener("change", function() {
                const categoryKey = this.id;
                fetchProducts(categoryKey);
            });
        });
    
        // M·∫∑c ƒë·ªãnh t·∫£i s·∫£n ph·∫©m "b·ªô v·ª£t" khi trang web load
        window.onload = () => fetchProducts("bo-vot");
    </script>
    

    <!-- Contact Section -->
    <section class="contact-section">
        <h2>CONTACT</h2>
        <p class="subheading">Fan? Drop a note!</p>

        <div class="contact-container">
            <div class="contact-info">
                <p><i class="fas fa-map-marker-alt"></i> T√¢n B√¨nh, H·ªì Ch√≠ Minh</p>
                <p><i class="fas fa-phone"></i> Phone: 0355984425</p>
                <p><i class="fas fa-envelope"></i> Email: Tballmail@mail.com</p>
            </div>
            <form class="contact-form">
                <div class="input-group">
                    <input type="text" placeholder="Name" required>
                    <input type="email" placeholder="Email" required>
                </div>
                <textarea placeholder="Message" required></textarea>
                <button type="submit">SEND</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="social-icons">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fas fa-comments"></i></a>
        </div>
        <div class="chatbox">Chatbox</div>
    </footer>

</body>
</html>
